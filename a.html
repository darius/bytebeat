<form>
  <input id="code" type="text" value="t ^ t>>8"><br>
  <input id="play" type="submit" value="Play">
</form>
<audio id="player" autoplay="true" controls></audio>
<p>
<canvas id="viz" height="256" width="512"></canvas>
<p id="error">

<script src="bytebeat.js"></script>
<script>

function dbg(msg) {
    if (window.console)
	console.log(msg);
}
function byId(id) {
    return document.getElementById(id);
}
var code   = byId('code');
var player = byId('player');
var viz    = byId('viz');
var error  = byId('error');

if (typeof(player.play) === 'undefined') {
    alert("Your browser doesn't seem to support audio. It's OK, you're not a bad person. But this app will fail.");
}

function play() {
    error.innerHTML = '';
    try {
        showAudioVisual(makeSound(compileComposer(code.value), 30, 8000),
                        player, viz);
    } catch (err) {
        error.innerHTML = '' + err;
    }
    return false;
}

code.focus();
byId('play').onclick = play;

</script>
