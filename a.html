<form>
  <input id="code" type="text" value="t ^ t/8"><br>
  <input id="play" type="submit" value="Play">
</form>
<br><br><span id="error"></span><br>
<audio id="player" autoplay="true" controls></audio>

<script src="bytebeat.js"></script>
<script>
function byId(id) {
    return document.getElementById(id);
}

var audio = byId('player');
if (typeof(audio.play) === 'undefined') {
    alert("Your browser doesn't seem to support audio. It's OK, you're not a bad person. But this app will fail.");
}

function play() {
    byId('error').innerHTML = "";
    try {
        audio.src = generateAudio(byId('code').value);
    } catch (err) {
        byId('error').innerHTML = "" + err;
    }
    return false;
}

function generateAudio(code) {
    var frequency = 8000;
    var duration = 30;
    return audioFromExpression(code, frequency, duration);
}

byId('code').focus();
byId('play').onclick = play;
</script>
